(window.blocksyJsonP=window.blocksyJsonP||[]).push([[12],{30:function(e,t,r){"use strict";r.r(t),r.d(t,"mount",(function(){return g}));var i=r(1),o=r.n(i),s=r(0),c=r.n(s);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}const g=(e,t)=>{let{event:r}=t;const i={shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r=o()(".pswp")[0],s=o()(e),c=s;const a=[...e.closest(".woocommerce-product-gallery").querySelectorAll(".flexy-items .ct-image-container img:not(.zoomImg), .woocommerce-product-gallery > .ct-image-container img:not(.zoomImg)")].map(e=>({img:e,src:e.closest("a")?e.closest("a").href:e.src,w:(e.closest("a")?e.closest("a").dataset.width:e.width)||e.width,h:(e.closest("a")?e.closest("a").dataset.height:e.width)||e.width,title:e.getAttribute("title")}));if(1!==a.length||!a[0].img.closest("a")||a[0].img.closest("a").getAttribute("href")){var l=o.a.extend({index:0===t?0:t||o()(c).index(),addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].textContent=e.title,!0):(t.children[0].textContent="",!1)}},i),n=new PhotoSwipe(r,PhotoSwipeUI_Default,a,l);n.init()}},a=function(){let{onlyZoom:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[...document.querySelectorAll(".woocommerce-product-gallery .woocommerce-product-gallery__trigger")];[...document.querySelectorAll(".single-product .flexy-items .ct-image-container, .single-product .woocommerce-product-gallery > .ct-image-container")].map(r=>{if((wp.customize&&wp.customize("has_product_single_lightbox")&&"yes"===wp.customize("has_product_single_lightbox")()||!wp.customize)&&!e&&(r.hasPhotoswipeListener||(r.hasPhotoswipeListener=!0,r.addEventListener("click",e=>{if(e.preventDefault(),t.length>0)return;let i=0;r.closest(".flexy-items")&&(i=[...r.closest(".flexy-items").children].indexOf(r.parentNode)),window.PhotoSwipe&&s(r,i)}))),o.a.fn.zoom&&(wp.customize&&wp.customize("has_product_single_zoom")&&"yes"===wp.customize("has_product_single_zoom")()||!wp.customize)){const e=r.getBoundingClientRect();o()(r).zoom(l(l({url:r.href,touch:!1,duration:50},e.width>parseFloat(r.dataset.width)||e.height>parseFloat(r.dataset.height)?{magnify:2}:{}),d()?{on:"toggle"}:{})),setTimeout(()=>{})}}),t.map(e=>{e.hasPhotoswipeListener||(e.hasPhotoswipeListener=!0,e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),e.closest(".ct-image-container"))window.PhotoSwipe&&s(e.closest(".ct-image-container"));else if(document.querySelector(".single-product .woocommerce-product-gallery > .ct-image-container")&&window.PhotoSwipe&&s(document.querySelector(".single-product .woocommerce-product-gallery > .ct-image-container")),document.querySelector(".single-product .flexy-items .ct-image-container")){let e=document.querySelector(".single-product .flexy-pills"),t=Array.from(e.querySelector(".active").parentNode.children).indexOf(e.querySelector(".active")||e.firstElementChild);window.PhotoSwipe&&s(document.querySelector(".single-product .flexy-items").children[t].firstElementChild,t)}}))})};if(a(),!o.a||!o.a.fn||!o.a.fn.wc_variations_image_update)return;const n=o.a.fn.wc_variations_image_update,g=e=>{let{context:t,variation:r,args:i}=e;if(t[0].closest(".single-product").querySelector(".woocommerce-product-gallery > .ct-image-container")){let e=t[0].closest(".single-product").querySelector(".woocommerce-product-gallery > .ct-image-container");if(e.querySelector(".zoomImg")&&e.querySelector(".zoomImg").remove(),r){if(r.image&&r.image.src&&r.image.src.length>0){let t=e.querySelector("img");e.querySelector("img")||(t=document.createElement("img"),t.classList.add("ct-variation-image")),t.classList.contains("ct-variation-image")||t.dataset.originalSrc||(e.dataset.originalHref=e.href,t.src&&(t.dataset.originalSrc=t.src),t.srcset&&(t.dataset.originalSrcSet=t.srcset),t.sizes&&(t.dataset.originalSizes=t.sizes)),e.href=r.image.full_src,r.image.srcset&&(t.srcset=r.image.srcset),r.image.sizes&&(t.sizes=r.image.sizes),t.src=r.image.src,e.appendChild(t)}}else{let t=e.querySelector("img");t&&e.querySelector(".ct-variation-image")?t.remove():(e.href=e.dataset.originalHref||e.href,(t.dataset.originalSrc||t.src)&&(t.src=t.dataset.originalSrc||t.src),(t.dataset.originalSrcSet||t.srcset)&&(t.srcset=t.dataset.originalSrcSet||t.srcset),(t.dataset.originalSizes||t.sizes)&&(t.sizes=t.dataset.originalSizes||t.sizes))}return a({onlyZoom:!0}),void(n&&n.apply(t,i))}if(!t[0].closest(".single-product").querySelector(".flexy-pills"))return void(n&&n.apply(t,i));const o=()=>{t[0].closest(".single-product").querySelector(".flexy-container").dataset.flexy||t[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild.click()},s=()=>{let e=t[0].closest(".single-product").querySelector(".flexy-pills [data-original-src]"),r=t[0].closest(".single-product").querySelector(".flexy-items [data-original-src]");e&&(e.parentNode.href=e.parentNode.dataset.originalHref||e.parentNode.href,(e.dataset.originalSrc||e.src)&&(e.src=e.dataset.originalSrc||e.src),(e.dataset.originalSrcSet||e.srcset)&&(e.srcset=e.dataset.originalSrcSet||e.srcset),(e.dataset.originalSizes||e.sizes)&&(e.sizes=e.dataset.originalSizes||e.sizes),r.parentNode.href=r.parentNode.dataset.originalHref||r.parentNode.href,(r.dataset.originalSrc||r.src)&&(r.src=r.dataset.originalSrc||r.src),(r.dataset.originalSrcSet||r.srcset)&&(r.srcset=r.dataset.originalSrcSet||r.srcset),(r.dataset.originalSizes||r.sizes)&&(r.sizes=r.dataset.originalSizes||r.sizes))};if(!r)return o(),s(),[...t[0].closest(".single-product").querySelectorAll(".zoomImg")].map(e=>e.remove()),a({onlyZoom:!0}),void(n&&n.apply(t,i));s();const c=t[0].closest(".single-product").querySelector(`.flexy-items [srcset*="${r.image.src}"]`);if(c){const e=t[0].closest(".single-product").querySelector(".flexy-pills > *").children[[...t[0].closest(".single-product").querySelector(".flexy-items").children].indexOf(c.closest("div"))];e&&e.click()}else{o();let e=t[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild.firstElementChild;t[0].closest(".single-product").querySelector('.flexy-pills[data-type="circle"]')&&(e=t[0].closest(".single-product").querySelector(".flexy-pills > *").firstElementChild);let i=t[0].closest(".single-product").querySelector(".flexy-items").firstElementChild.querySelector(".ct-image-container img");e.dataset.originalSrc||(e.parentNode.dataset.originalHref=e.parentNode.href,e.dataset.originalSrc=e.src,e.dataset.originalSrcSet=e.srcset,e.dataset.originalSizes=e.sizes,i.parentNode.dataset.originalHref=i.parentNode.href,i.dataset.originalSrc=i.src,i.dataset.originalSrcSet=i.srcset,i.dataset.originalSizes=i.sizes),e.parentNode.href=r.image.full_src,r.image.srcset&&(e.srcset=r.image.srcset),r.image.sizes&&(e.sizes=r.image.sizes),e.src=r.image.src,i.parentNode.href=r.image.full_src,r.image.srcset&&(i.srcset=r.image.srcset),r.image.sizes&&(i.sizes=r.image.sizes),i.src=r.image.src,o()}[...t[0].closest(".single-product").querySelectorAll(".zoomImg")].map(e=>e.remove()),a({onlyZoom:!0}),n&&n.apply(t,i)};o.a.fn.wc_variations_image_update=function(e){const t=document.querySelector(".woocommerce-product-gallery"),r=document.querySelector(".type-product").id.replace("product-","");if(window.ct_localizations.woo_gallery_replace_on_variation_change&&(!t||parseInt(e.variation_id)!==parseInt(t.dataset.currentVariation))){const i=new FormData;return i.append("action","blocksy_get_product_view_for_variation"),i.append("variation_id",e.variation_id),i.append("product_id",r),void fetch(ct_localizations.ajax_url,{method:"POST",body:i}).then(e=>e.json()).then(r=>{let{success:i,data:o}=r;if(i)return jQuery(t).replaceWith(o.html),void setTimeout(()=>{c.a.trigger("blocksy:frontend:init"),setTimeout(()=>{g({context:this,args:arguments,variation:e})})});g({context:this,args:arguments,variation:e})})}g({context:this,args:arguments,variation:e})}}}}]);